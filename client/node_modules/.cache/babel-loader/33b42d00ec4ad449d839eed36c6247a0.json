{"ast":null,"code":"import * as Msal from 'msal';\nconst config = {\n  auth: {\n    clientId: \"0b814c5c-8524-466c-bd3a-5f1b4714494c\",\n    authority: \"https://hedons.b2clogin.com/hedons.onmicrosoft.com/B2C_1_ezFlow\",\n    redirectUri: 'http://localhost:3000',\n    validateAuthority: false,\n    navigateToLoginRequestUrl: false\n  },\n  cache: {\n    cacheLocation: \"localStorage\",\n    storeAuthStateInCookie: true\n  }\n};\nconst loginRequest = {\n  scopes: [\"https://hedons.onmicrosoft.com/api/user_impersonation\"],\n  loginHint: null\n};\n\nconst requiresInteraction = errorMessage => {\n  if (!errorMessage || !errorMessage.length) {\n    return false;\n  }\n\n  return errorMessage.indexOf(\"consent_required\") > -1 || errorMessage.indexOf(\"interaction_required\") > -1 || errorMessage.indexOf(\"login_required\") > -1;\n};\n\nlet context = new Msal.UserAgentApplication(config);\ncontext.handleRedirectCallback(error => {\n  if (error) {\n    const errorMessage = error.errorMessage ? error.errorMessage : \"Unable to acquire access token.\";\n    console.error(errorMessage);\n  }\n});\nexport const b2cSignOut = () => {\n  context.logout();\n};\nexport const acquireToken = () => {\n  return context.acquireTokenSilent(loginRequest).catch(error => {\n    if (requiresInteraction(error.errorCode)) {\n      return context.acquireTokenRedirect(loginRequest);\n    } else {\n      return null;\n    }\n  });\n};\nexport const b2cSignIn = () => {\n  context.loginRedirect(loginRequest);\n};","map":{"version":3,"sources":["/Users/Cacace/Desktop/platform/platform/client/src/utils/AuthB2CService.js"],"names":["Msal","config","auth","clientId","authority","redirectUri","validateAuthority","navigateToLoginRequestUrl","cache","cacheLocation","storeAuthStateInCookie","loginRequest","scopes","loginHint","requiresInteraction","errorMessage","length","indexOf","context","UserAgentApplication","handleRedirectCallback","error","console","b2cSignOut","logout","acquireToken","acquireTokenSilent","catch","errorCode","acquireTokenRedirect","b2cSignIn","loginRedirect"],"mappings":"AAAA,OAAO,KAAKA,IAAZ,MAAsB,MAAtB;AAEA,MAAMC,MAAM,GAAG;AACXC,EAAAA,IAAI,EAAE;AACFC,IAAAA,QAAQ,EAAE,sCADR;AAEFC,IAAAA,SAAS,EAAE,iEAFT;AAGFC,IAAAA,WAAW,EAAE,uBAHX;AAIFC,IAAAA,iBAAiB,EAAE,KAJjB;AAKFC,IAAAA,yBAAyB,EAAE;AALzB,GADK;AAQXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,aAAa,EAAE,cADZ;AAEHC,IAAAA,sBAAsB,EAAE;AAFrB;AARI,CAAf;AAcA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,MAAM,EAAE,CAAC,uDAAD,CADS;AAEjBC,EAAAA,SAAS,EAAE;AAFM,CAArB;;AAMA,MAAMC,mBAAmB,GAAGC,YAAY,IAAI;AACxC,MAAI,CAACA,YAAD,IAAiB,CAACA,YAAY,CAACC,MAAnC,EAA2C;AACvC,WAAO,KAAP;AACH;;AAED,SACID,YAAY,CAACE,OAAb,CAAqB,kBAArB,IAA2C,CAAC,CAA5C,IACAF,YAAY,CAACE,OAAb,CAAqB,sBAArB,IAA+C,CAAC,CADhD,IAEAF,YAAY,CAACE,OAAb,CAAqB,gBAArB,IAAyC,CAAC,CAH9C;AAKH,CAVD;;AAYA,IAAIC,OAAO,GAAG,IAAIlB,IAAI,CAACmB,oBAAT,CAA8BlB,MAA9B,CAAd;AACAiB,OAAO,CAACE,sBAAR,CAAgCC,KAAD,IAAW;AACtC,MAAIA,KAAJ,EAAW;AACP,UAAMN,YAAY,GAAGM,KAAK,CAACN,YAAN,GAAqBM,KAAK,CAACN,YAA3B,GAA0C,iCAA/D;AACAO,IAAAA,OAAO,CAACD,KAAR,CAAcN,YAAd;AACH;AACJ,CALD;AAOA,OAAO,MAAMQ,UAAU,GAAG,MAAM;AAC5BL,EAAAA,OAAO,CAACM,MAAR;AACH,CAFM;AAIP,OAAO,MAAMC,YAAY,GAAG,MAAM;AAC9B,SAAOP,OAAO,CAACQ,kBAAR,CAA2Bf,YAA3B,EACFgB,KADE,CACIN,KAAK,IAAI;AACZ,QAAIP,mBAAmB,CAACO,KAAK,CAACO,SAAP,CAAvB,EAA0C;AACtC,aAAOV,OAAO,CAACW,oBAAR,CAA6BlB,YAA7B,CAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAP;AACH;AACJ,GAPE,CAAP;AAQH,CATM;AAWP,OAAO,MAAMmB,SAAS,GAAG,MAAM;AAC3BZ,EAAAA,OAAO,CAACa,aAAR,CAAsBpB,YAAtB;AAEH,CAHM","sourcesContent":["import * as Msal from 'msal';\r\n\r\nconst config = {\r\n    auth: {\r\n        clientId: \"0b814c5c-8524-466c-bd3a-5f1b4714494c\",\r\n        authority: \"https://hedons.b2clogin.com/hedons.onmicrosoft.com/B2C_1_ezFlow\",\r\n        redirectUri: 'http://localhost:3000',\r\n        validateAuthority: false,\r\n        navigateToLoginRequestUrl: false\r\n    },\r\n    cache: {\r\n        cacheLocation: \"localStorage\",\r\n        storeAuthStateInCookie: true\r\n    }\r\n};\r\n\r\nconst loginRequest = {\r\n    scopes: [\"https://hedons.onmicrosoft.com/api/user_impersonation\"],\r\n    loginHint: null\r\n};\r\n\r\n\r\nconst requiresInteraction = errorMessage => {\r\n    if (!errorMessage || !errorMessage.length) {\r\n        return false;\r\n    }\r\n\r\n    return (\r\n        errorMessage.indexOf(\"consent_required\") > -1 ||\r\n        errorMessage.indexOf(\"interaction_required\") > -1 ||\r\n        errorMessage.indexOf(\"login_required\") > -1\r\n    );\r\n};\r\n\r\nlet context = new Msal.UserAgentApplication(config);\r\ncontext.handleRedirectCallback((error) => {\r\n    if (error) {\r\n        const errorMessage = error.errorMessage ? error.errorMessage : \"Unable to acquire access token.\";\r\n        console.error(errorMessage);\r\n    }\r\n});\r\n\r\nexport const b2cSignOut = () => {\r\n    context.logout();\r\n}\r\n\r\nexport const acquireToken = () => {\r\n    return context.acquireTokenSilent(loginRequest)\r\n        .catch(error => {\r\n            if (requiresInteraction(error.errorCode)) {\r\n                return context.acquireTokenRedirect(loginRequest);\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n}\r\n\r\nexport const b2cSignIn = () => {\r\n    context.loginRedirect(loginRequest);\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}