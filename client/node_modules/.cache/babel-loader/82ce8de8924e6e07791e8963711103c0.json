{"ast":null,"code":"import * as Msal from 'msal';\nexport default class AuthB2C {\n  constructor() {\n    this.login = () => {\n      // return this.app.loginPopup(this.loginRequest).then(function (loginResponse) {\n      //     // getToken(tokenRequest).then(updateUI);\n      //     console.log(loginResponse)\n      // }).catch(function (error) {\n      //     console.error(error);\n      // });\n      return this.app.loginPopup().then(idToken => {\n        console.log(idToken);\n        return null; // const user = this.app.getUser();\n        // if (user) {\n        //     return user;\n        // } else {\n        //     return null;\n        // }\n      }, () => {\n        return null;\n      });\n    };\n\n    this.logout = () => {\n      this.app.logout();\n    };\n\n    this.getToken = () => {\n      return this.app.acquireTokenSilent(this.applicationConfig.graphScopes).then(accessToken => {\n        return accessToken;\n      }, error => {\n        return this.app.acquireTokenPopup(this.applicationConfig.graphScopes).then(accessToken => {\n          return accessToken;\n        }, err => {\n          console.error(err);\n        });\n      });\n    };\n\n    var appConfig = {\n      b2cScopes: [\"https://b2cmern.onmicrosoft.com/mern/demo.read\"],\n      webApi: \"https://fabrikamb2chello.azurewebsites.net/hello\"\n    };\n    const msalConfig = {\n      auth: {\n        clientId: \"ce5d1a2b-20a7-4f63-adde-6f0168cc29e5\",\n        authority: \"https://b2cmern.b2clogin.com/b2cmern.onmicrosoft.com/B2C_1_signupsignin\",\n        validateAuthority: false\n      },\n      cache: {\n        cacheLocation: \"localStorage\",\n        storeAuthStateInCookie: true\n      }\n    };\n    this.loginRequest = {\n      // scopes: appConfig.b2cScopes\n      scopes: [\"openid\", \"profile\", \"User.Read\"]\n    }; // request to acquire a token for resource access\n\n    this.tokenRequest = {\n      scopes: appConfig.b2cScopes\n    };\n    this.applicationConfig = {\n      clientID: \"ce5d1a2b-20a7-4f63-adde-6f0168cc29e5\",\n      authority: \"https://b2cmern.b2clogin.com/b2cmern.onmicrosoft.com/B2C_1_signupsignin\"\n    };\n    this.app = new Msal.UserAgentApplication(this.applicationConfig.clientID, this.applicationConfig.authority); // this.app = new Msal.UserAgentApplication(msalConfig);\n  }\n\n}","map":{"version":3,"sources":["D:/Projects/devconnector_2.0/client/src/utils/AuthB2C.js"],"names":["Msal","AuthB2C","constructor","login","app","loginPopup","then","idToken","console","log","logout","getToken","acquireTokenSilent","applicationConfig","graphScopes","accessToken","error","acquireTokenPopup","err","appConfig","b2cScopes","webApi","msalConfig","auth","clientId","authority","validateAuthority","cache","cacheLocation","storeAuthStateInCookie","loginRequest","scopes","tokenRequest","clientID","UserAgentApplication"],"mappings":"AAAA,OAAO,KAAKA,IAAZ,MAAsB,MAAtB;AAEA,eAAe,MAAMC,OAAN,CAAc;AACzBC,EAAAA,WAAW,GAAG;AAAA,SAwCdC,KAxCc,GAwCN,MAAM;AACV;AACA;AACA;AAEA;AACA;AACA;AAEA,aAAO,KAAKC,GAAL,CAASC,UAAT,GAAsBC,IAAtB,CACHC,OAAO,IAAI;AACPC,QAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AAEA,eAAO,IAAP,CAHO,CAIP;AACA;AACA;AACA;AACA;AACA;AACH,OAXE,EAYH,MAAM;AACF,eAAO,IAAP;AACH,OAdE,CAAP;AAgBH,KAjEa;;AAAA,SAmEdG,MAnEc,GAmEL,MAAM;AACX,WAAKN,GAAL,CAASM,MAAT;AACH,KArEa;;AAAA,SAuEdC,QAvEc,GAuEH,MAAM;AACb,aAAO,KAAKP,GAAL,CAASQ,kBAAT,CAA4B,KAAKC,iBAAL,CAAuBC,WAAnD,EAAgER,IAAhE,CACHS,WAAW,IAAI;AACX,eAAOA,WAAP;AACH,OAHE,EAIHC,KAAK,IAAI;AACL,eAAO,KAAKZ,GAAL,CACFa,iBADE,CACgB,KAAKJ,iBAAL,CAAuBC,WADvC,EAEFR,IAFE,CAGCS,WAAW,IAAI;AACX,iBAAOA,WAAP;AACH,SALF,EAMCG,GAAG,IAAI;AACHV,UAAAA,OAAO,CAACQ,KAAR,CAAcE,GAAd;AACH,SARF,CAAP;AAUH,OAfE,CAAP;AAiBH,KAzFa;;AAEV,QAAIC,SAAS,GAAG;AACZC,MAAAA,SAAS,EAAE,CAAC,gDAAD,CADC;AAEZC,MAAAA,MAAM,EAAE;AAFI,KAAhB;AAKA,UAAMC,UAAU,GAAG;AACfC,MAAAA,IAAI,EAAE;AACFC,QAAAA,QAAQ,EAAE,sCADR;AAEFC,QAAAA,SAAS,EAAE,yEAFT;AAGFC,QAAAA,iBAAiB,EAAE;AAHjB,OADS;AAMfC,MAAAA,KAAK,EAAE;AACHC,QAAAA,aAAa,EAAE,cADZ;AAEHC,QAAAA,sBAAsB,EAAE;AAFrB;AANQ,KAAnB;AAYA,SAAKC,YAAL,GAAoB;AAChB;AACAC,MAAAA,MAAM,EAAE,CAAC,QAAD,EAAW,SAAX,EAAsB,WAAtB;AAFQ,KAApB,CAnBU,CAwBV;;AACA,SAAKC,YAAL,GAAoB;AAChBD,MAAAA,MAAM,EAAEZ,SAAS,CAACC;AADF,KAApB;AAIA,SAAKP,iBAAL,GAAyB;AACrBoB,MAAAA,QAAQ,EAAE,sCADW;AAErBR,MAAAA,SAAS,EAAE;AAFU,KAAzB;AAIA,SAAKrB,GAAL,GAAW,IAAIJ,IAAI,CAACkC,oBAAT,CACP,KAAKrB,iBAAL,CAAuBoB,QADhB,EAEP,KAAKpB,iBAAL,CAAuBY,SAFhB,CAAX,CAjCU,CAqCV;AACH;;AAvCwB","sourcesContent":["import * as Msal from 'msal';\r\n\r\nexport default class AuthB2C {\r\n    constructor() {\r\n\r\n        var appConfig = {\r\n            b2cScopes: [\"https://b2cmern.onmicrosoft.com/mern/demo.read\"],\r\n            webApi: \"https://fabrikamb2chello.azurewebsites.net/hello\"\r\n        };\r\n\r\n        const msalConfig = {\r\n            auth: {\r\n                clientId: \"ce5d1a2b-20a7-4f63-adde-6f0168cc29e5\",\r\n                authority: \"https://b2cmern.b2clogin.com/b2cmern.onmicrosoft.com/B2C_1_signupsignin\",\r\n                validateAuthority: false\r\n            },\r\n            cache: {\r\n                cacheLocation: \"localStorage\",\r\n                storeAuthStateInCookie: true\r\n            }\r\n        };\r\n\r\n        this.loginRequest = {\r\n            // scopes: appConfig.b2cScopes\r\n            scopes: [\"openid\", \"profile\", \"User.Read\"]\r\n        };\r\n\r\n        // request to acquire a token for resource access\r\n        this.tokenRequest = {\r\n            scopes: appConfig.b2cScopes\r\n        };\r\n\r\n        this.applicationConfig = {\r\n            clientID: \"ce5d1a2b-20a7-4f63-adde-6f0168cc29e5\",\r\n            authority: \"https://b2cmern.b2clogin.com/b2cmern.onmicrosoft.com/B2C_1_signupsignin\"\r\n        }\r\n        this.app = new Msal.UserAgentApplication(\r\n            this.applicationConfig.clientID,\r\n            this.applicationConfig.authority)\r\n\r\n        // this.app = new Msal.UserAgentApplication(msalConfig);\r\n    }\r\n\r\n    login = () => {\r\n        // return this.app.loginPopup(this.loginRequest).then(function (loginResponse) {\r\n        //     // getToken(tokenRequest).then(updateUI);\r\n        //     console.log(loginResponse)\r\n\r\n        // }).catch(function (error) {\r\n        //     console.error(error);\r\n        // });\r\n\r\n        return this.app.loginPopup().then(\r\n            idToken => {\r\n                console.log(idToken);\r\n\r\n                return null;\r\n                // const user = this.app.getUser();\r\n                // if (user) {\r\n                //     return user;\r\n                // } else {\r\n                //     return null;\r\n                // }\r\n            },\r\n            () => {\r\n                return null;\r\n            }\r\n        );\r\n    };\r\n\r\n    logout = () => {\r\n        this.app.logout();\r\n    };\r\n\r\n    getToken = () => {\r\n        return this.app.acquireTokenSilent(this.applicationConfig.graphScopes).then(\r\n            accessToken => {\r\n                return accessToken;\r\n            },\r\n            error => {\r\n                return this.app\r\n                    .acquireTokenPopup(this.applicationConfig.graphScopes)\r\n                    .then(\r\n                        accessToken => {\r\n                            return accessToken;\r\n                        },\r\n                        err => {\r\n                            console.error(err);\r\n                        }\r\n                    );\r\n            }\r\n        );\r\n    };\r\n}"]},"metadata":{},"sourceType":"module"}