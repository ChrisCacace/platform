{"ast":null,"code":"var _jsxFileName = \"/Users/Cacace/Desktop/platform/platform/client/src/components/posts/Player.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Player extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.createVideoPlayer = amp => {\n      const video = amp(this.videoRef, {\n        nativeControlsForTouch: false,\n        autoplay: false,\n        width: \"640\",\n        height: \"400\",\n        controls: true,\n        logo: {\n          enabled: false\n        },\n        techOrder: ['azureHtml5JS', 'html5FairPlayHLS', 'html5'],\n        plugins: {\n          // appInsights: {\n          //     //add additonal plugin options here\n          //     'debug': true\n          // },\n          ga: {\n            //'eventLabel' : 'EventLabelForTracking', //default is URL source\n            'debug': false,\n            //default is false\n            'eventsToTrack': ['playerConfig', 'loaded', 'playTime', 'percentsPlayed', 'start', 'error', 'buffering', 'bitrate'],\n            // default is ['playerConfig', 'loaded', 'playTime', 'percentsPlayed', 'start', 'end', 'play', 'pause', 'error', 'buffering', 'fullscreen', 'seek', 'bitrate']\n            'percentsPlayedInterval': 20 //default is 20\n\n          }\n        }\n      });\n      video.addEventListener(amp.eventName.error, errorDetails => {\n        console.log(errorDetails);\n      });\n      this.addEventListener('ended', function () {\n        console.log('Finished!');\n      });\n      return video;\n    };\n\n    this.waitForAmp = () => {\n      return new Promise((resolve, reject) => {\n        let waited = 0;\n\n        const wait = interval => {\n          setTimeout(() => {\n            waited += interval;\n            const amp = window['amp'];\n\n            if (amp !== undefined) {\n              return resolve(amp);\n            }\n\n            if (waited >= this.props.ampLoadTimeout * 100) {\n              return reject();\n            }\n\n            wait(interval * 2);\n            return null;\n          }, interval);\n        };\n\n        wait(30);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.waitForAmp().then(amp => {\n      this.videoPlayer = this.createVideoPlayer(amp);\n      this.videoPlayer.src({\n        \"src\": \"//amssamples.streaming.mediaservices.windows.net/91492735-c523-432b-ba01-faba6c2206a2/AzureMediaServicesPromo.ism/manifest\",\n        \"type\": \"application/vnd.ms-sstr+xml\"\n      });\n    }).catch(e => console.error('Could not find Azure Media Player plugin', e));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Player-video-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      className: \"azuremediaplayer amp-default-skin amp-big-play-centered\",\n      ref: input => {\n        this.videoRef = input;\n      },\n      style: {\n        width: '100%'\n      },\n      tabIndex: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nPlayer.propTypes = {\n  ampLoadTimeout: PropTypes.number,\n  sourceVideo: PropTypes.object\n};\nPlayer.defaultProps = {\n  ampLoadTimeout: 300\n};\nexport default Player;","map":{"version":3,"sources":["/Users/Cacace/Desktop/platform/platform/client/src/components/posts/Player.js"],"names":["React","Component","PropTypes","Player","createVideoPlayer","amp","video","videoRef","nativeControlsForTouch","autoplay","width","height","controls","logo","enabled","techOrder","plugins","ga","addEventListener","eventName","error","errorDetails","console","log","waitForAmp","Promise","resolve","reject","waited","wait","interval","setTimeout","window","undefined","props","ampLoadTimeout","componentDidMount","then","videoPlayer","src","catch","e","render","input","propTypes","number","sourceVideo","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Player extends Component {\r\n  static propTypes = {\r\n    ampLoadTimeout: PropTypes.number,\r\n    sourceVideo: PropTypes.object\r\n  }\r\n\r\n  static defaultProps = {\r\n    ampLoadTimeout: 300,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.waitForAmp().then((amp) => {\r\n      this.videoPlayer = this.createVideoPlayer(amp);\r\n      this.videoPlayer.src({\r\n        \"src\": \"//amssamples.streaming.mediaservices.windows.net/91492735-c523-432b-ba01-faba6c2206a2/AzureMediaServicesPromo.ism/manifest\",\r\n        \"type\": \"application/vnd.ms-sstr+xml\"\r\n      });\r\n    }).catch(e => console.error('Could not find Azure Media Player plugin', e));\r\n  }\r\n\r\n  createVideoPlayer = (amp) => {\r\n    const video = amp(this.videoRef, {\r\n      nativeControlsForTouch: false,\r\n      autoplay: false,\r\n      width: \"640\",\r\n      height: \"400\",\r\n      controls: true,\r\n      logo: { enabled: false },\r\n      techOrder: [\r\n        'azureHtml5JS',\r\n        'html5FairPlayHLS',\r\n        'html5',\r\n      ],\r\n      plugins: {\r\n        // appInsights: {\r\n        //     //add additonal plugin options here\r\n        //     'debug': true\r\n        // },\r\n        ga: {\r\n            //'eventLabel' : 'EventLabelForTracking', //default is URL source\r\n            'debug': false, //default is false\r\n            'eventsToTrack': ['playerConfig', 'loaded', 'playTime', 'percentsPlayed', 'start', 'error', 'buffering', 'bitrate'], // default is ['playerConfig', 'loaded', 'playTime', 'percentsPlayed', 'start', 'end', 'play', 'pause', 'error', 'buffering', 'fullscreen', 'seek', 'bitrate']\r\n            'percentsPlayedInterval': 20 //default is 20\r\n        }\r\n    }\r\n    });\r\n\r\n    video.addEventListener(amp.eventName.error, (errorDetails) => {\r\n      console.log(errorDetails);\r\n    });\r\n\r\n    this.addEventListener('ended', function() {\r\n      console.log('Finished!');\r\n  });\r\n\r\n    return video;\r\n  }\r\n\r\n  waitForAmp = () => {\r\n    return new Promise((resolve, reject) => {\r\n      let waited = 0;\r\n      const wait = (interval) => {\r\n        setTimeout(() => {\r\n            waited += interval;\r\n            const amp = window['amp'];\r\n            if (amp !== undefined) {\r\n            return resolve(amp);\r\n            }\r\n            if (waited >= this.props.ampLoadTimeout * 100) {\r\n            return reject();\r\n            }\r\n            wait(interval * 2);\r\n            return null;\r\n        }, interval);\r\n      };\r\n      wait(30);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <div className=\"Player-video-container\">\r\n        <video\r\n          className=\"azuremediaplayer amp-default-skin amp-big-play-centered\"\r\n          ref={(input) => { this.videoRef = input; }}\r\n          style={{ width: '100%' }} tabIndex=\"0\"\r\n        >\r\n        </video>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Player;\r\n"]},"metadata":{},"sourceType":"module"}